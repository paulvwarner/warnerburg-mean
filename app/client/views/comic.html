{% extends 'includes/layouts/commonLayoutWithNav.html' %}

{% block title %}Comic &laquo; {% parent %}{% endblock %}

{% block content %}
    <div ng-app="comicPageModule" ng-controller="comicPageController" data-comic-sequence-number="[[ comic.sequenceNumber ]]">
        <div class="comic-nav-header-container table-container">
            <div class="comic-nav-header-row">
                <div class="comic-nav-header-sequence-number-cell">
                    <img src="/images/details/labels/comic.jpg" />
                    <img src="/images/details/labels/sharp.jpg" /><span data-display-comic-sequence-number="">{% for sequenceNumberElement in comic.sequenceNumberElements %}<img src="/images/details/labels/[[sequenceNumberElement]].jpg">{% endfor %}</span>
                    <img data-display-if-last-comic="" src="/images/details/labels/latest.jpg" {% if not comic.isLast %}class="invisible-nav-button"{% endif %}/>
                </div>
                <div class="comic-nav-header-buttons-cell">
                    <a href="[[ common.comicUrl ]]/1" data-first-comic-link="" {% if comic.isFirst %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/firstdarks.jpg" /></a>
                    <a href="[[ common.comicUrl ]]/[[ comic.sequenceNumber - 1 ]]" data-previous-comic-link="" {% if comic.isFirst %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/prevdarks.jpg" /></a>
                    <a href="[[ common.archivesUrl ]]"><img class="warnerburg-link-image" src="/images/navigation/archivesdarks.jpg" /></a>
                    <a href="[[ common.comicUrl ]]/[[ comic.sequenceNumber + 1 ]]" data-next-comic-link="" {% if comic.isLast %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/nextdarks.jpg" /></a>
                    <a href="[[ common.comicUrl ]]" data-last-comic-link="" {% if comic.isLast %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/lastdarks.jpg" /></a>
                </div>
                <div class="comic-nav-header-publish-date-cell" data-display-comic-created-date="">
                    {% for dateElement in comic.createdDateElements %}<img src="/images/details/labels/[[dateElement]].jpg">{% endfor %}
                </div>
            </div>
        </div>
        <div class="comic-container">
            <img id="comic-image" data-bind-src-after-first-model-change="comic.image" src="[[ comic.image ]]" />
        </div>
        <div class="comic-nav-footer-container table-container">
            <div class="comic-nav-footer-links">
                <div class="comic-nav-footer-link">
                    <a href="[[ common.comicUrl ]]/1" data-first-comic-link="" {% if comic.isFirst %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/firstdark.jpg" /></a>
                </div>
                <div class="comic-nav-footer-link">
                    <a href="[[ common.comicUrl ]]/[[ comic.sequenceNumber - 1 ]]" data-previous-comic-link="" {% if comic.isFirst %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/prevdark.jpg" /></a>
                </div>
                <div class="comic-nav-footer-link">
                    <a href="[[ common.archivesUrl ]]"><img class="warnerburg-link-image" src="/images/navigation/archivesdark.jpg" /></a>
                </div>
                <div class="comic-nav-footer-link">
                    <a href="[[ common.comicUrl ]]/[[ comic.sequenceNumber + 1 ]]" data-next-comic-link="" {% if comic.isLast %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/nextdark.jpg" /></a>
                </div>
                <div class="comic-nav-footer-link">
                    <a href="[[ common.comicUrl ]]" data-last-comic-link="" {% if comic.isLast %}class="invisible-nav-button"{% endif %}><img class="warnerburg-link-image" src="/images/navigation/lastdark.jpg" /></a>
                </div>
            </div>
        </div>

        <div id="blog-post-area">
            <div class="blog-post-container table-container">
                <div class="blog-post-elements">
                    <div class="blog-post-author-pic">
                        <img src="[[ comic.authorPicture ]]" />
                    </div>
                    <div class="blog-post-content" data-bind-content-text-after-first-model-change="">
                        <div>[[ comic.text|safe ]]</div>
                    </div>
                </div>
            </div>

            <div>
                <div class="comic-links-container">
                    <div class="comic-links" data-show-when-document-is-ready="">
                        <a class="unobtrusive-link" href="rss" >Comic RSS</a> -
                        <a id="commentsLink" class="unobtrusive-link" href="#">Comments (<span ng-bind="comic.comments.length">[[comic.comments.length]]</span>)</a>
                    </div>
                </div>
                <div class="comic-comments-container">
                    <div class="comic-comments-header">
                        {{ comic.comments.length }} Comments:<br/>
                        <hr/>
                    </div>
                    <div class="comic-comment-container table-container">
                        <div class="comic-comment-elements" ng-repeat="comment in comic.comments | orderBy:commentDate">
                            <div class="comic-comment-index">{{ $index + 1 }}.</div>
                            <div class="comic-comment-content">
                                <div class="comic-comment-text" ng-bind-html="comment.text"></div>
                                <div class="comic-comment-details">Comment by {{ comment.author }} @ {{ comment.commentDate | date:'yyyy-MM-dd HH:mm:ss'}}</div>
                            </div>
                        </div>
                    </div>
                    <form class="comic-new-comment-container" ng-submit="createComment('[[ comic.sequenceNumber ]]', newComment)">
                        <hr/>
                        <div class="comic-new-comment-header">Add a new comment:</div>
                        <div class="comic-new-comment-field">
                            <input id="newCommentAuthor" type="text" ng-model="newComment.author" placeholder="Your Name"/>
                        </div>
                        <div class="comic-new-comment-field">
                            <textarea id="newCommentText" ng-model="newComment.text" placeholder="Your Comment"></textarea>
                        </div>
                        <div>
                            <input type="submit" value="Submit Comment"/>
                        </div>
                    </form>
                </div>
            </div>

            <div class="comic-rss-footer">

            </div>
        </div>
    </div>
{% endblock %}

{% block footerIncludes %}
    {% parent %}
    <script type="text/javascript" src="/bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="/bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script type="text/javascript" src="/bower_components/angular-resource/angular-resource.js"></script>
    <script type="text/javascript" src="/controllers/controller.page.comic.js"></script>
    <script type="text/javascript" src="/includes/js/comicPage.js"></script>
{% endblock %}
